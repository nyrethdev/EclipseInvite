<!doctype html>
<html>
<head><meta charset="utf-8"><title>Download</title></head>
<body style="font-family:sans-serif;padding:40px">
<h2>Download</h2>
<div id="msg">Checking...</div>
<script>
(async()=>{
  const t=new URLSearchParams(location.search).get("token");
  if(!t){msg.textContent="No token";return;}
  const r=await fetch("https://167.86.123.109/api/validate?token="+t);
  const d=await r.json();
  if(!d.valid){msg.textContent="Invalid: "+(d.reason||d.error);return;}
  msg.innerHTML=`Valid link (uses left: ${d.usesLeft})<br><button id='dl'>Download</button>`;
  dl.onclick=()=>location=`https://167.86.123.109/api/download?token=${t}`;
})();
</script>
</body>
</html>
